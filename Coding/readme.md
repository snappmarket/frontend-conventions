<div dir="rtl" align="right">

# راهنمای کدنویسی در پروژه‌های ما

هر کدی که نوشته بشه، فارغ از اینکه هر تعداد نیروی انسانی روش کار کرده باشه در نهایت باید به یک 
فرم باشن و از استاندارد مناسب بهره‌مند باشن.

> در این پروژه فرض اولیه این است که `linter` و ابزارهای بررسی کد، با کانفیگ مورد استفاده در پروژه نیو وب استفاده می‌شود و بقیه موارد شرح داده می‌شود. 



### فهرست

| ردیف | مسئله  |
| ---- | ------- |
|  1   | **Test روی استیج و develop** |
|  2   | **موارد مجاز ها** |
|  3   | **پروژه‌های جانبی** |
|  4   | **ترتیب import** |
|  5   | **کامپوننت‌ها** |
|  6   | **افزودن پکیج** |
|  7   | **عنوان کامیت و برنچ** |
|  7   | **مرج ریکوئست‌ها** |
|  8   | **؟** |

----

1. ### استفاده از linter
    در کل پروژه‌های فرانت می‌بایست linter و prettier کانفیگ شده و مورد استفاده قرار گیرد.
    در گیت نیز همواره باید precommit بررسی این مورد انجام گیرد و اگر کدی بدون lint و prettify شدن پوش شده باشد در مرحله code review پذیرفته نیست.
    مسائلی مثل indent، spacingها، استفاده از semicolon و ... جزو این موارد هستند.
    
    **[فهرست](#فهرست)**

2. ### عنوان فایل‌ها
    در نام‌گذاری فایل‌ها به مورد استفاده آن دقت کرده و نام‌گذاری صحیحی انجام دهید:
    
    | فرمت‌ | نوع فایل |
    | -------- | ------ |
    | شروع با حرف بزرگ(UpperCamelCase). هم نام کامپوننت و بدون - و ... | کامپوننت ری‌اکت |
    | camelCase | helper, config, ... |
    | camelCase ولی اتمام با `.message.js` | messages |
    
    **[فهرست](#فهرست)**

3. ### پروژه‌های جانبی
    همانطور که می‌دانیم در ساختار وب سایت جدید، از سه پروژه زیر استفاده کرده‌ایم:
    
    1. [frontend-toolbox](https://github.com/snappmarket/frontend-toolbox)
    2. [frontend-template](https://gitlab.snapp.market/frontend/frontend-template)
    3. [iconbox](https://github.com/iconsbox/icons)
    
    #### Toolbox
    - پروژه تولباکس می‌بایست برای هوک‌های عمومی، کامپوننت‌های رابط کاربری عمومی و توابع کمکی عمومی مورد استفاده قرار گیرد.
    - در این پروژه‌ هر تغییری می‌بایست بر روی دولوپ pull request داده شود و پس از تایید مرج شده و ریلیز گرفته شود.
    - هر شخصی که ریلیز میگیرد وظیفه نوشتن release note را دارد و باید توضیح مختصری در مورد ریلیز جاری بنویسد.
    در هنگام توسعه کد و تست آن، می بایست ریلیز‌های تستی گرفته شود و بعد از موفقیت آمیز بودن آن بر روی پروژه مورد نظر ریلیز قطعی انجام شود. برای ریلیز از دستور زیر استفاده کنید:
        
        ```bash
        npm run release -- X.X.X-testing.1
        ```
        بجای X.X.X از ساختار semver استفاده کنید. با این کد کدهای مورد نظر با تگ جدید بر روی npm قرار می‌گیرند و شما می‌توانید در پروژه دلخواه از آنها استفاده کنید.
    
    - اگر در یک پروژه جانبی از این کد‌ها استفاده کرده‌اید، در merge request خود قید کنید که نیاز به مرج شدن این بخش از pull request روی گیت هاب را دارید.
    - رعایت تمامی این توافقات بر روی تولباکس نیز اجباری است و PR مورد نظر با این دید ریویو خواهد شد.
    - اگر می‌خواهید بخشی از کد را حذف کنید حتما به tree-shakable بودن آن توجه کنید و آن را کاملا بر ندارید مگر اینکه ریلیز major داشته باشیم.
    - برای دمو پروژه روی گیت هاب به زودی سایتی ساخته می‌شود و از آن استفاده خواهد شد.
    -
    
    #### Template
    - در این پروژه ساختار داخلی پروژه‌ها و بیزینس لاجیک قرار می‌گیرد.
    - برای تغییرات در ducks حساس باشید و با درنظر گرفتن پروژه‌های مختلف تغییرات انجام دهید.
    - تمامی مسیج‌ها و mockها و constantها در این پروژه قرار دارد پس از ساخت مجدد آنها در پروژه خودداری کنید.
    - هوک‌های غیر قابل انتشار در تولباکس را اینجا قرار دهید مگر اینکه هنوز از تست صحیح هوک مطمئن نیستید، در این صورت بعد از گذشت یک مدت هوک را به تولباکس منتقل کنید.
    - این پروژه بیشتر از هر پروژه‌ای به ریلیز نوت نیاز دارد پس حتما آن را بنویسید.
    - 

    #### IconBox
    - این پروژه بیشتر در تایم‌های شخصی بنده توسعه داده شده و یه باکس خیلی طولانی و بزرگ از آیکوناست.
    - موقع اضافه کردن آیکون اگر با فرآیند ساختن آشنا نیستین issue ثبت کنین و آیکون مورد نظر رو attach کنید من اضافه می‌کنم.
    - در صورت اضافه کردن آیکون مورد نظر، در ابتدا از سالم بودن svg اطمینان حاصل کنید، سپس اگر یه آیکون تکی هستش اونو به پوشه packages/custom(snappmarket قدیم) اضافه کنید، اگر هم یک پک جدید آیکون نیاز هست توی پوشه packages اون فولدر رو ایجاد کنید و package.json براش بسازین، بعدش می‌تونین از دستورات(scripts) ساخت و بهینه‌سازی و تولید آیکون روی این پکیج استفاده کنید.
    - موقع استفاده از این آیکون‌ها حتما providerش رو توی لایه‌های اول برنامه قرار بدین.
    - اگه از قابلیت sprite استفاده می‌کنید حتما کانفیگ صحیحی رو به provider بدین، نمونه‌اش توی وبسایت جدید هست و به این شلکه:
        
        <span dir="ltr">

        ```jsx
        <IconboxProvider
          options={{
            publicPath: process.env.PUBLIC_URL,
            importSpriteSVG: false,
            useSpriteFile: false,
            SSR: isServer,
          }}
        >
            <Router />
        </IconboxProvider>
        ```

        </span>

    - اگه یه ریلیز از آیکون‌باکس گرفتین حتما integrationهای iconjar و figma و sketch رو هم بیلد کنید.
    - وبسایت دمو برای آیکون‌باکس اتوماتیک با هر مرج با مستر بیلد میشه و نیازی به انجام کاری نیست.
    
    **[فهرست](#فهرست)**

4. ### ترتیب import
    توی صفحات و یا کامپوننت‌هایی که می‌سازید. برای import کردن‌ها از یه ترتیب مشخص استفاده کنید.
    قانونی که برای این ترتیب در پروژه‌های ما وجود داره اینه که اول پکیج‌های خارجی رو import کنیم و بعد بریم سراغ چیزهای دیگه. ترتیب به این صورته:
    
    - پکیج خارجی
    - template.hooks
    - template.ducks
    - template.others
    - local absolute files
    - local relative files
    - local relative styles
    
    **[فهرست](#فهرست)**

5. ### کامپوننت‌ها
    - کامپوننت‌های ساخته شده باید به شکل functional اجرا بشن و اگر خیلی خیلی ضروری بود سراغ کلاس کامپوننت‌ بریم.
    - کامپوننت‌ باید حجیم نباشه و اگه بیشتر از ۷۰ خط شد باید شکسته بشه به partials‌های کوچیک‌تر.
    - propهای کامپوننت تابعی باید به شکل destructuring پیاده بشن و توی ورودی تابع قرار بگیرند. 
    - اگه هر رخدادی توی کامپوننت انجام میشه رو میخواییم مدیریت کنیم باید تابع بسازیم براش و این تابع باید با پیشوند handle شروع بشه
    - ترتیب توابع توی کامپوننت باید به این شکل باشه که اول هوک‌ها قراربگیرند، بعد توابع handler و بعد helperهای رندر و بعد خود رندر.
    - توی کامپوننت ساید افکت نباید باشه و یه کامپوننت فقط باید متشکل از هوک، هندلر، توابع هلپر برای رندر و خود رندر باشه.
    - برای کامپوننتی که prop داره حتما باید proptypes نوشته بشه
    
    **[فهرست](#فهرست)**

6. ### اضافه کردن پکیج
    - اگر قصد اضافه کردن هر پکیجی به کد را دارین می‌بایست اول از سایز اون توی [bundlephobia](https://bundlephobia.com/) مطمئن بشین.
    - اگه بجای پکیج از کدنویسی خودمون استفاده می‌کنیم، باید توجیه فنی و زمانی برای انجام اون توسط خودمون باشه.
    - برای استفاده از پکیج‌های با استار کم توی گیت‌هاب حتما مشورت کنیم.
    - اگه یه باگی تو یه پکیج هست و اطلاع دادیم و بعد چند روز رفع نمیشه کلون کنیم و حلش کنیم
    
    **[فهرست](#فهرست)**

7. ### عنوان کامیت و برنچ
    - برای کامیت‌های ارسال شده عنوان قابل فهمی و معنی داری از کار انجام شده بنویسیم. عناوینی عمومی نزاریم، اینکه فلان فایل رو تغییر دادم، یا تغییراتی فلان‌جا دادم، عنوان خوبی نیستن، سعی کنیم تا حد امکان بگیم دقیقا چه کاری اونجا انجام شده.
    - کامیت‌ها رو نه خیلی تند تند و نه خیلی دیر به دیر، بلکه به شکل پیوسته و پس از تموم شدن یه بخش از کد ارسال کنیم.
    - عنوان برنچ رو با پترن زیر بسازیم، که ماهیت برنچ رو بخش اول، اسم خودمون بخش دوم و شماره تسک و عنوانش رو بخش سوم بزاریم:
        ```bash
        <fix|hotfix|feat|deploy|chore> / <author> / <taskId> - <title>
        ```
    - سعی کنیم تا حد امکان هاتفیکس نباشیم و روال عادی تسک که از برنچ خودمون به develop و بعد از develop به مستر هست رو طی کنیم ولی اگه مجبور شدیم هاتفیکس بزنیم. اگه تغییر موردنظر می‌تونه خطری باشه حتما به یکی بگیم ریویو کنه.
    
    **[فهرست](#فهرست)**

8. ###مرج ریکوئست‌ها
    - اگر کارتان بر روی تسکی تمام نشده است حتما wip باشد.
    - اگر به یک MR کامل تسلط ندارید مرج نکنید.
    - اگر نیاز به ریویو توسط یک فرد خاص دارید به اون اطلاع دهید.
    
    **[فهرست](#فهرست)**

8. ### ؟
    ؟
    
    **[فهرست](#فهرست)**


</div>
